<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Object Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <script src="timeline.js"></script>
    <script src="lightmode.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="object-page.js"></script>
    <script src="PERSONALIZATION.js"></script>
</head>
<body>
    <header>
        <!-- NAVBAR -->
         
        <!-- toggle -->
        <div class="hover-area"></div>
        <nav>
            <div class="theme-toggle-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32">
                    <!-- Cerchio centrale -->
                    <circle cx="16" cy="16" r="7" fill="none" stroke="currentColor" stroke-width="2" />
                    
                    <!-- Raggi del sole -->
                    <!-- Verticali -->
                    <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" />
                    <line x1="16" y1="26" x2="16" y2="30" stroke="currentColor" stroke-width="2" />
                    
                    <!-- Orizzontali -->
                    <line x1="2" y1="16" x2="6" y2="16" stroke="currentColor" stroke-width="2" />
                    <line x1="26" y1="16" x2="30" y2="16" stroke="currentColor" stroke-width="2" />
                    
                    <!-- Diagonali (uniformi) -->
                    <line x1="5"  y1="5"  x2="8"  y2="8"  stroke="currentColor" stroke-width="2" />  
                    <line x1="24" y1="8" x2="27" y2="5" stroke="currentColor" stroke-width="2" />
                    <line x1="5"  y1="27" x2="8"  y2="24" stroke="currentColor" stroke-width="2" />   
                    <line x1="24" y1="24" x2="27" y2="27" stroke="currentColor" stroke-width="2" />
                  </svg>
                <div class="toggle">
                    <label class="theme-switch">
                        <input type="checkbox">
                        <span class="toggle-track"></span>
                    </label>
                </div>
            </div>

            
           
            
        <!-- main button (long-button) -->
                <div class="button" id="long-button">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="tours.html">Tours</a></li>
                        <li><a href="documentation.html">Documentation</a></li>
                    </ul>
                </div>
                
                <!-- icons -->
                <div class="icon-container">

                    <a href="map_page.html" class="icon-link">
                      <div class="button" id="icon-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM10 5.47l4 1.4v11.66l-4-1.4V5.47zm-5 .99l3-1.01v11.7l-3 1.16V6.46zm14 11.08l-3 1.01V6.86l3-1.16v11.84z"/>
                      </svg>
                      </div>
                      <span class="tooltip">Go to object map section</span>
                    </a>

                    <a href="grid" class="icon-link">
                        <div class="button" id="icon-button">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z"/>
                      </svg>
                    </div>
                    <span class="tooltip">Show the object collection</span>
                    </a>
                
                  </div>
                  
                  <!-- tour button -->
                <button class="button" id="tour-button">
                    <a href="Object-page.html" id="tour-text">Start Tour</a>
                </button>
             
            
        </nav>
        
        <!-- end of nav -->
    </header>
    
        <!-- copy-paste header for every page!!!!!!!! -->

      <main>
        <h2 id="item-title" class="item-titolo"></h2>
        <section class="object-main-container">
            <div class="object-navigation">
                <div class="navigation-item">
                    <button class="circular-button" id="prev">&larr;</button>
                    <span class="navigation-text">Previous</span>
                </div>
                
                <div class="navigation-item">
                    <span class="navigation-text">Next</span>
                    <button class="circular-button" id="next">&rarr;</button>
                </div>
            </div>


            <section class="image-text-container">
                <div class="object-tours">
                    <button class="button" id="timeline-button">TIMELINE TOUR</button>
                    <button class="button" id="colonial-button">COLONIAL CONQUESTS TOUR</button>
                    <button class="button" id="geo-button">GEO TOUR</button>
                </div>
                <img id="tour-image" src="" alt="Tour-Image" >
                <div class="text-area">
                    <p id="item-text"> 
                    </p>
                    <div class="more-info">
                        <div class="more-buttons">
                            <button class="button" id="complexity-less">Less</button>
                            <p>COMPLEXITY</p>
                            <button class="button"  id="complexity-more">More</button>
                        </div>

                        <div class="more-buttons">
                            <button class="button" id="length-less">Less</button>
                            <p>LENGTH</p>
                            <button class="button" id="length-more">More</button>
                        </div>
                    </div>
                </div>
            </section>
          

           <section class="map-geolocation-container">
                <div class="map-section">
                    <h2>Museum Localization</h2>
                    <img src="images/map_museum_placeholder.png" alt="Museum map">
                    <p>Room 3<br>Colonization in Ancient History</p>
                </div>
                <div class="divider"></div>
                <div class="geolocalization-section">
                    <h2>Geolocalization</h2>
                    <img src="images/map_museum_placeholder.png" alt="Map">
                    <p>Then: Persia (Iran)<br>Now: Montreal, Canada</p>
                </div>
            </section>

            <section class="metadata-container">
                <h2>Metadata</h2>
                <div class="metadata-content">
                    <div class="Rdf-Graph">
                        <p id="par_1">RDF Graph Visualization</p>
                        <img id="graph-image_id" src="" alt="Rdf Graph image"  class="graph-image_class"  onclick="openModal(this.src)" >
                        <p id="par_2">For a better interactive visualization of the graph:</p>
                            <ul id="ul_1">
                                <li>Copy the following <a href="" target="_blank" id="rdf-text-link">link</a></li>
                                <li>Click on the "View on isSemantic.net" button below</li>
                                <li>Paste the link under "Enter website address:" and click on "Submit" button.</li>
                            </ul>
                            <button class="button" id="view-isSemantic_button"> 
                                <a href="https://issemantic.net/rdf-visualizer"  id="isSemantic-text">View on isSemantic.net</a>
                            </button>
                    </div>

                    <!-- This html snippet is for the modal container of the img -->
                    <div id="imageModal" class="modal">
                        <!-- “X” close button -->
                        <span class="close" onclick="closeModal()">&times;</span>
                        
                        <!-- Container for the image we want to show enlarged -->
                        <div class="modal-content">
                          <img id="expandedImg" src="" alt="Full size image" />
                        </div>
                    </div>
                      <!-- End of the modal container -->

                    <div class="Table-Metadata">
                        <p id="par_3">General Information</p>
                        <div id="table-metadata"></div>
                    </div>
                    <div id="current-index" style="display: none;"></div>
                </div>
            </section>
        </section> 
    </main>
      
    
    <!-- copy paste footer into every page -->
    <footer>
        <hr>
        <h2 class="footer-h2">The Stolen Archive</h2>
        <p>Is a project developed for the final examination of the course Information Modelling and Web Technologies held by professor Fabio Vitali in the context of the Masters Degree program Digital Humanities and Digital Knowledge at Alma Mater Studiorum University of Bologna. As such, this project will not be maintained or updated past the scope of the course's examination.<br>However, if you have any reclaims or suggestions, you can contact us through our team page.</p>
        <hr>
        <p>&copy; 2024 The Stolen Archive. All rights reserved.</p>
    </footer>

    <!-- This is for making all the 'view-drawio_button' button clickable  -->
    <script> 
        document.getElementById('view-isSemantic_button').addEventListener('click', (e) => {
            e.preventDefault(); <!-- This is for preventing  the default behavior of the <a> element: it goes directly to the web page. -->
            window.open('https://issemantic.net/rdf-visualizer', '_blank');
        });
    </script>

    <!-- Script for making the modal container work and open the full image of the graph properly -->
    <script>
        // References to modal elements
        const modal       = document.getElementById("imageModal");
        const expandedImg = document.getElementById("expandedImg");
        const modalContent = document.querySelector(".modal-content");
        
        // Variables for zoom and pan
        let scale = 1;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        let translateX = 0;
        let translateY = 0;
        
        // Open the modal with the given `src`
        function openModal(src) {
            // Set the enlarged image src to the one clicked
            expandedImg.src = src;
            
            // Reset scale and translation each time
            scale = 1;
            translateX = 0;
            translateY = 0;
            applyTransform();
        
            // Show the modal
            modal.style.display = "block";
        }
        
        // Close the modal
        function closeModal() {
            modal.style.display = "none";
        }
        
        // Apply the current scale/translate values
        function applyTransform() {
            expandedImg.style.transform = `
                translate(-50%, -50%)
                translate(${translateX}px, ${translateY}px)
                scale(${scale})
            `;}
        
        // Handle mouse wheel (zoom)
        expandedImg.addEventListener('wheel', (e) => {
            e.preventDefault(); // Avoid entire page scroll
        
            // You can tweak the zoom factor (0.001) to taste
            scale -= e.deltaY * 0.001;
            
            // Limit scale range to avoid infinite zoom
            if (scale < 0.2) scale = 0.2;
            if (scale > 10) scale = 10;
        
            applyTransform();
        });
        
        // Handle mouse down (start dragging)
        expandedImg.addEventListener('mousedown', (e) => {
            e.preventDefault();
            isDragging = true;
            // Record initial mouse position minus current translate
            startX = e.clientX - translateX;
            startY = e.clientY - translateY;
        });
        
        // Handle mouse move (panning)
        expandedImg.addEventListener('mousemove', (e) => {
            if (!isDragging) return; 
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            applyTransform();
        });
        
        // Stop dragging on mouse up or leaving the image area
        expandedImg.addEventListener('mouseup', () => {
            isDragging = false;
        });
        expandedImg.addEventListener('mouseleave', () => {
            isDragging = false;
        });
        
        // Expose openModal / closeModal globally if needed
        window.openModal = openModal;
        window.closeModal = closeModal;
    </script>
        
    <script src="map.js"></script>
    <script src="toggle-navbar.js"></script>
    <script src="start-tour-button.js"></script>
</body>
</html>